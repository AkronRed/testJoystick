# Copyright (c) farm-ng, inc.
#
# Licensed under the Amiga Development Kit License (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://github.com/farm-ng/amiga-dev-kit/blob/main/LICENSE
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

RelativeLayout:
    Button:
        id: back_btn_layout
        pos_hint: {"x": 0.0, "top": 1.0}
        background_color: 0, 0, 0, 0
        size_hint: 0.1, 0.1
        background_normal: "assets/back_button.png"
        on_release: app.on_exit_btn()
        Image:
            source: "assets/back_button_normal.png" if self.parent.state == "normal" else "assets/back_button_down.png"
            pos: self.parent.pos
            size: self.parent.size
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            size_hint_x: 0.3
            orientation: 'vertical'
            Widget:
                size_hint_y: 2.0
            Label:
                text: "Amiga State:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_state
                font_size: 18
            Widget: # Empty placeholder
            Label:
                text: "Speed [m/s]:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_speed
                font_size: 18
            Widget: # Empty placeholder
            Label:
                text: "Angular Rate [rad/s]:"
                font_size: 18
                size_hint_y: 0.5
            Label:
                text: app.amiga_rate
                font_size: 18
            Widget:
            Label:
                size_hint_y: 0.25
                text: "Value ID: " + str(int(read_val_sld.value))
            Slider:
                id: read_val_sld
                min: 0
                max: 100
                step: 1
                orientation: 'horizontal'
                on_touch_move: app.val_slider_move()
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: 0.5
                Widget:
                Button:
                    text: "-"
                    on_release: app.val_sld_dec()
                Button:
                    text: "+"
                    on_release: app.val_sld_inc()
                Widget:
            Button:
                size_hint_y: 0.75
                text: "Read value"
                id: read_val_btn
                font_size: 18
                on_release: app.trigger_read_req()
            Label:
                size_hint_y: 0.5
                text: "Value: " + str(app.read_value)
            Label:
                size_hint_y: 0.5
                text: "Success: " + str(app.read_success)
            Widget:
                size_hint_y: 0.5
        Widget:
            size_hint_x: 0.1
        VirtualJoystickWidget:
            id: joystick
        Widget:
            size_hint_x: 0.1
        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        size_hint_y: 0.1
                        text: "Motor C"
                    Label:
                        size_hint_y: 0.1
                        text: "RPM: " + str(app.motor_c_rpm)
                    VirtualJoystickWidget:
                        joystick_diameter: 100
                        id: joystick_c
                Widget:
                    size_hint_x: 0.1
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        size_hint_y: 0.1
                        text: "Motor D"
                    Label:
                        size_hint_y: 0.1
                        text: "RPM: " + str(app.motor_d_rpm)
                    VirtualJoystickWidget:
                        joystick_diameter: 100
                        id: joystick_d
            Widget:
                size_hint_y: 0.1
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        size_hint_y: 0.1
                        text: "Motor B"
                    Label:
                        size_hint_y: 0.1
                        text: "RPM: " + str(app.motor_b_rpm)
                    VirtualJoystickWidget:
                        joystick_diameter: 100
                        id: joystick_b
                Widget:
                    size_hint_x: 0.1
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        size_hint_y: 0.1
                        text: "Motor A"
                    Label:
                        size_hint_y: 0.1
                        text: "RPM: " + str(app.motor_a_rpm)
                    VirtualJoystickWidget:
                        joystick_diameter: 100
                        id: joystick_a
